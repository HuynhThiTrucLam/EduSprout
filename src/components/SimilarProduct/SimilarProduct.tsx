import type { Course } from "@/types/course";
import { useEffect, useState } from "react";
import ProductItem from "../Product/ProductItem";
import styles from "./SimilarProduct.module.scss";
import type { Book } from "@/types/book";
import type { Document } from "@/types/documents";
import { getSimilarCoursesService } from "../../services/product_service";

const SimilarProduct = () => {
  const [products, setProducts] = useState<Course[] | Book[] | Document[]>([]);

  const fetchProducts = async () => {
    const response = await getSimilarCoursesService();
    setProducts(response);
  };
  useEffect(() => {
    fetchProducts();
  }, []);

  return (
    <div className={styles["SimilarProduct"]}>
      <div className={styles["SimilarProduct-header"]}>
        <svg
          width="28"
          height="25"
          viewBox="0 0 28 25"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M13.6227 0.579461C13.7415 0.527052 13.8697 0.5 13.9994 0.5C14.129 0.5 14.2573 0.527052 14.3761 0.579461C19.0199 2.63078 23.4494 5.14542 27.5989 8.08598C27.7452 8.18962 27.8592 8.33315 27.9278 8.49982C27.9964 8.66649 28.0167 8.84943 27.9862 9.0273C27.9558 9.20517 27.876 9.37064 27.7561 9.50439C27.6361 9.63815 27.481 9.73468 27.3089 9.78272C23.0009 10.9851 18.8325 12.6495 14.8746 14.7473L14.8709 14.7498C14.7277 14.826 14.5858 14.9009 14.4439 14.9783C14.3073 15.052 14.1549 15.0906 14 15.0906C13.8451 15.0906 13.6927 15.052 13.5561 14.9783C11.8585 14.0627 10.1209 13.2251 8.34858 12.4681V12.1838C8.34858 12.0175 8.43271 11.8691 8.56456 11.7891C10.4599 10.6283 12.4099 9.56105 14.4075 8.59107C14.6326 8.48168 14.8055 8.28639 14.8882 8.04815C14.9709 7.80992 14.9565 7.54826 14.8482 7.32073C14.74 7.09321 14.5468 6.91846 14.311 6.83492C14.0753 6.75138 13.8164 6.7659 13.5913 6.87529C11.5391 7.87187 9.53597 8.96836 7.58886 10.1609C7.31185 10.3307 7.07287 10.557 6.88716 10.8253C6.70144 11.0936 6.57306 11.3981 6.51019 11.7193C4.60299 10.9777 2.66098 10.3309 0.691125 9.78145C0.518959 9.73341 0.363861 9.63688 0.243924 9.50312C0.123988 9.36937 0.0441588 9.2039 0.0137502 9.02603C-0.0166584 8.84816 0.00360729 8.66522 0.072183 8.49855C0.140759 8.33188 0.254817 8.18835 0.401051 8.08471C4.55023 5.14468 8.97938 2.63047 13.6227 0.579461Z"
            fill="#373735"
          />
          <path
            d="M15.3304 16.656C18.4149 14.9906 21.6356 13.5971 24.9569 12.4909C25.1252 14.2854 25.2332 16.0989 25.2771 17.9276C25.282 18.1193 25.2294 18.308 25.1263 18.469C25.0233 18.63 24.8745 18.7558 24.6995 18.8299C21.1398 20.3323 17.7315 22.1776 14.5218 24.3402C14.3671 24.4444 14.1853 24.5 13.9994 24.5C13.8135 24.5 13.6317 24.4444 13.477 24.3402C10.2676 22.1777 6.85977 20.3324 3.30054 18.8299C3.12549 18.7561 2.97657 18.6306 2.87328 18.4698C2.76999 18.309 2.71713 18.1205 2.72164 17.9288C2.76559 16.0989 2.87359 14.2866 3.04186 12.4896C4.19838 12.8754 5.33984 13.2942 6.46498 13.746V15.3577C6.19366 15.5157 5.96559 15.7396 5.80141 16.009C5.63722 16.2785 5.5421 16.5851 5.52465 16.901C5.5072 17.217 5.56796 17.5324 5.70145 17.8186C5.83494 18.1049 6.03694 18.353 6.28918 18.5405C6.17616 19.0228 6.01041 19.4961 5.79065 19.9492C6.35824 20.2195 6.92207 20.5 7.48087 20.7868C7.79585 20.1393 8.02834 19.454 8.17278 18.7474C8.49033 18.6047 8.76263 18.376 8.95955 18.0866C9.15647 17.7972 9.27033 17.4584 9.28853 17.1077C9.30672 16.7569 9.22855 16.4079 9.06266 16.0993C8.89677 15.7907 8.64963 15.5345 8.34858 15.359V14.5404C9.81541 15.188 11.2564 15.8938 12.6683 16.656C13.0779 16.8771 13.535 16.9927 13.9994 16.9927C14.4637 16.9927 14.9209 16.8771 15.3304 16.656Z"
            fill="#373735"
          />
          <path
            d="M4.53366 21.7183C5.06107 21.1865 5.47923 20.5888 5.7894 19.9479C6.35824 20.2195 6.92207 20.4987 7.48087 20.7868C7.06999 21.6302 6.52439 22.4007 5.866 23.0648C5.68746 23.2329 5.45133 23.3244 5.20734 23.3201C4.96335 23.3157 4.73055 23.2158 4.558 23.0414C4.38544 22.867 4.2866 22.6318 4.2823 22.3852C4.27799 22.1386 4.36856 21.9 4.53492 21.7195L4.53366 21.7183Z"
            fill="#373735"
          />
        </svg>
        <p>Sản phẩm tương tự</p>
      </div>
      <div className={styles["SimilarProduct-list"]}>
        {products.map((product) => (
          <ProductItem key={product.id} productInfor={product} />
        ))}
      </div>
    </div>
  );
};

export default SimilarProduct;
